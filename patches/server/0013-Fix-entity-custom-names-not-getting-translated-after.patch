From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: booky10 <boooky10@gmail.com>
Date: Sun, 16 Jul 2023 20:32:10 +0200
Subject: [PATCH] Fix entity custom names not getting translated after unload


diff --git a/src/main/java/net/minecraft/world/entity/Entity.java b/src/main/java/net/minecraft/world/entity/Entity.java
index f938d3ecfb4f7b9cb5add4faf07a53c5bf8f0307..53a3c45afadbdbbd5e2ef5b6602726ebe0523be0 100644
--- a/src/main/java/net/minecraft/world/entity/Entity.java
+++ b/src/main/java/net/minecraft/world/entity/Entity.java
@@ -2523,7 +2523,7 @@ public abstract class Entity implements Nameable, EntityAccess, CommandSource {
                         String s = nbt.getString("CustomName");
 
                         try {
-                            this.setCustomName(Component.Serializer.fromJson(s));
+                            this.setCustomName(io.papermc.paper.adventure.PaperAdventure.asVanilla(net.kyori.adventure.text.serializer.gson.GsonComponentSerializer.gson().deserialize(s))); // CloudPlane
                         } catch (Exception exception) {
                             Entity.LOGGER.warn("Failed to parse entity custom name {}", s, exception);
                         }
