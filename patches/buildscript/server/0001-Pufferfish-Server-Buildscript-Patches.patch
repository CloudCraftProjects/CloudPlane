From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Kevin Raneri <kevin.raneri@gmail.com>
Date: Tue, 9 Nov 2021 23:36:56 -0500
Subject: [PATCH] Pufferfish Server Buildscript Patches


diff --git a/build.gradle.kts b/build.gradle.kts
index c16d409e31f3ce53b4704f03e200e3270db38aa6..b910370958d4e82c23638a42733c5f3f74849c9d 100644
--- a/build.gradle.kts
+++ b/build.gradle.kts
@@ -107,6 +107,16 @@ if (project.providers.gradleProperty("publishDevBundle").isPresent) {
     }
 }
 
+// Pufferfish start
+sourceSets {
+    main {
+        java {
+            srcDir("src/main/pufferfish")
+        }
+    }
+}
+// Pufferfish end
+
 val log4jPlugins = sourceSets.create("log4jPlugins")
 configurations.named(log4jPlugins.compileClasspathConfigurationName) {
     extendsFrom(configurations.compileClasspath.get())
@@ -165,6 +175,8 @@ dependencies {
         isTransitive = false // includes junit
     }
 
+    implementation("com.github.technove:Flare:34637f3f87") // Pufferfish - flare
+
     testImplementation("io.github.classgraph:classgraph:4.8.179") // For mob goal test
     testImplementation("org.junit.jupiter:junit-jupiter:5.12.2")
     testImplementation("org.junit.platform:junit-platform-suite-engine:1.12.2")
@@ -188,6 +200,13 @@ dependencies {
     implementation("me.lucko:spark-paper:1.10.133-20250413.112336-1")
 }
 
+// Pufferfish start
+tasks.withType<JavaCompile> {
+    val compilerArgs = options.compilerArgs
+    compilerArgs.add("--add-modules=jdk.incubator.vector")
+}
+// Pufferfish end
+
 tasks.jar {
     manifest {
         val git = Git(rootProject.layout.projectDirectory.path)
